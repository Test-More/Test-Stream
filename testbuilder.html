<dl class="listnav">
    <dt id="problems">Problems</dt>
    <dd>
        <h2>What's <u><i>wrong</i></u> with Test::Builder? <small style="font-weight: lighter">(Test::More)</small></h2>

        <table>
            <tr>
                <td><img src="oldage.jpg"/></td>
                <td><img src="snail.jpg"/></td>
                <td><img src="map-old.png"/></td>
            </tr>
            <tr>
                <td><img src="straws.jpg"/></td>
                <td><img src="testing.png"/></td>
                <td><img src="tooling.png"/></td>
            </tr>
        </table>
    </dd>

    <dt id="old">old-age</dt>
    <dd>
        <h2>Test::Builder is showing its age</h2>

        <img style="float: right" src="oldage.jpg"/>

        <br />
        <br />

        <ul>
            <li>First release was March 28, 2001.</li>
            <li>Last significant feature added Jun 23, 2009 (subtests).</li>
            <li>Test-Builder/More2 halted Test-Builder, but ultimately stalled.</li>
            <li>The code has grown organically, it shows.</li>
        </ul>
    </dd>

    <dt id="speed">Speed</dt>
    <dd>
        <h2>Test::Builder is slow</h2>

         <img style="float: right" src="snail.jpg"/>

         <br />
         <br />

         <ul>
            <li>Old code has some inefficient practices.</li>
            <li>Perl test suite takes a very long time to run.</li>
            <li>Not everything benefits from the features that make it slow.</li>
         </ul>
    </dd>

    <dt id="level">Level</dt>
    <dd>
        <h2>Test::Builder uses a $Level variable for error reporting</h2>

        <script class="code">
            sub my_ok {
                my ($ok, $name, $optional_diag) = @_;

                # Ensure errors are reported to our caller.
                local $Test::Builder::Level = $Test::Builder::Level + 1;
                my $out = ok($ok, $name);
                diag($optional_diag) unless $out;

                return $out;
            }
        </script>

        <img style="float: right" src="map-old.png"/>

        <ul>
            <li>Obscure, very few people are aware of it.</li>
            <li>The job it does is super critical.</li>
            <li>It does not do the job well.</li>
            <li>It is easy to get wrong.</li>
            <li>It is slow.</li>
        </ul>

    </dd>

    <dt id="syncing">Syncing</dt>
    <dd>
        <h2>Test::Builder has minimal concurrency support</h2>

        <img style="float: right" src="straws.jpg"/>

        <br />
        <br />

        <ul>
            <li>Works with ithreads... sometimes.</li>
            <li>Third party module required for forking, breaks ithread support.</li>
            <li>You can turn off test numbers and manually plan...</li>
            <li>Subtests and concurrency just do not play nicely.</li>
        </ul>

        But at least you can run multiple test files concurrently!
    </dd>

    <dt id="testing">Testing</dt>
    <dd>
        <h2>Test::Builder is hard to test (Wait, what?!)</h2>

        Test::Builder revolutionaized testing in perl. It opened the door to an
        entire ecosystem of intercompatible testing tools.
        <p>
        Suprisingly, testing tools build on Test::Builder is not easy.

        <img style="float: right" src="testing.png"/>
        <ul>
            <li>Test::Builder::Tester made it possible.</li>
            <li>Test::Tester made it better.</li>
            <li>Both are limited in what they support.</li>
            <li>Both are fragile.</li>
            <li>Both make assumption.</li>
        </ul>

        The Test::Stream project was concieved after David Golden (XDG)
        submitted
        <a href="https://github.com/Test-More/test-more/pull/396">this pull request</a>.
        It changed the indentation of a comment intended for human consumption,
        but broke downstream tool tests.
    </dd>

    <dt id="tooling">Tooling</dt>
    <dd>
        <h2>Test::Builder had a limited vision</h2>
        <h3>Test::Builder assumed 'ok()' and 'diag()' were all you need</h2>

        <img style="float: right" src="tooling.png"/>
        <ul>
            <li>No hooks into ok or diag.</li>
            <li>No way to customize their behavior.</li>
            <li>Modifying state is non-obvious and an afterthought.</li>
            <li>Monkeypatching is rampant.</li>
        </ul>

        <h3>Test::Builder puts EVERYTHING into a monolithic singleton</h2>

        <ul>
            <li>Can't subclass test builder... not nicely anyway.</li>
            <li>Subtests hack on the singleton would be rated <b>NC-17</b> for gore.</li>
            <li>Can't easily intercept results.</li>
            <li>Tools that replace the singleton cannot work together.</li>
        </ul>
    </dd>
</dl>
